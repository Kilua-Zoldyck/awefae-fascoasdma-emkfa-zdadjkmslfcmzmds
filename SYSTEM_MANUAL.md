# ๐ ุฏููู ูุธุงู ูุฑุงูุจุฉ ุงููููู ุงููุทูู (FTTH Monitor)

## ๐๏ธ ูููููุฉ ุงููุธุงู (Architecture)
ูุนูู ุงููุธุงู ุจุงุณุชุฑุงุชูุฌูุฉ **ุงูุฌุฏุงูู ุงููุฒุฏูุฌุฉ ุงููุชุฒุงููุฉ (Dual-Scheduler Redundancy)** ูุถูุงู ุงูุนูู 24/7 ุจุฏูุฉ ุนุงููุฉ ูุฃูุงู ุชุงู.

### 1. ุงูููููุงุช ุงูุฑุฆูุณูุฉ
| ุงููููู | ุงููุตู | ุงูุฏูุฑ |
| :--- | :--- | :--- |
| **Airflow** | ุณูุฑูุฑ ุฌุฏููุฉ ูุญูู (ุนูู ุฌูุงุฒู) | **ุงููุงุฆุฏ (Master):** ูุฑุณู ุฅุดุงุฑุฉ ุงูุชุดุบูู ูู 10 ุฏูุงุฆู ุจุงูุถุจุท ุทุงููุง ุงูุฌูุงุฒ ูุนูู. |
| **GitHub Cron** | ุฌุฏููุฉ ุณุญุงุจูุฉ (ุฏุงุฎู GitHub) | **ุงูุงุญุชูุงุทู (Backup):** ูุนูู ุชููุงุฆูุงู ูู 10 ุฏูุงุฆู ูู ุญุงูุฉ ุชููู Airflow (ุฅุบูุงู ุงููุงุจุชูุจ). |
| **Monitor Script** | `monitor.py` | ุงูุนูู ุงููุฏุจุฑ ุงูุฐู ูููู ุจุงููุญุต ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช. |
| **Cron-job.org** | ุฎุฏูุฉ ููุจู ุฎุงุฑุฌู (Cloud) | **ุงููุญูุฒ (Trigger):** ูุถูู ุชุดุบูู ุงููุธุงู 24/7 ุญุชู ูู GitHub ุชุฃุฎุฑ ุฃู ุชููู ุงููุงุจุชูุจ. |

---

## ๐ก๏ธ ุฃูุธูุฉ ุงูุญูุงูุฉ ูุงูุฃูุงู (Safety Mechanisms)
ูุถูุงู ุนุฏู ุญุธุฑ ุงูุญุณุงุจ ุฃู ุชุฏุงุฎู ุงูุฌุฏููุฉุ ูููุง ุจุจุฑูุฌุฉ ุฃูุธูุฉ ุญูุงูุฉ ุฐููุฉ:

### 1. ูุงูุน ุงูุชูุฑุงุฑ (Rate Limiter) ๐ฆ
*   **ุงููุดููุฉ:** ูุงุฐุง ูู ุฃุฑุณู Airflow ุฅุดุงุฑุฉุ ููู ููุณ ุงูุฏูููุฉ ุนูู GitHub Cronุ
*   **ุงูุญู:** ุงูุณูุฑูุจุช ูุณุฌู "ููุช ุขุฎุฑ ุชุดุบูู" (`last_run`).
*   **ุขููุฉ ุงูุนูู:** ุนูุฏ ุจุฏุก ุงูุชุดุบููุ ููุญุต ุงูุณูุฑูุจุช: ูู ูุฑ ุฃูุซุฑ ูู **5 ุฏูุงุฆู** ุนูู ุขุฎุฑ ูุฑุฉุ
    *   ูุนู โ -> ูุจุฏุฃ ุงูุนูู.
    *   ูุง โ -> ููุบู ุงูุชุดุบูู ููุฑุงู (ููุชุจ `Skipped: Too frequent`).
    *   **ุงููุชูุฌุฉ:** ุญูุงูุฉ ูู ุงูุญุธุฑ 100%.

### 2. ุงูุชุฎูู (Anti-Detection) ๐ญ
*   **ุงูุชุฃุฎูุฑ ุงูุนุดูุงุฆู:** ุนูุฏ ุจุฏุก ุงูุชุดุบููุ ููุชุธุฑ ุงูุณูุฑูุจุช ููุชุงู ุนุดูุงุฆูุงู (ุจูู 30 ุซุงููุฉ ู 6 ุฏูุงุฆู).
*   **ุงููุญุงูุงุฉ:** ูุธูุฑ ุงููุชุตูุญ ูุฃูู ูุณุชุฎุฏู ุจุดุฑู ุทุจูุนู ูููุณ ุฑูุจูุช.

### 3. ุฃูุงู ุงูุจูุงูุงุช (Security) ๐
*   **Session Token:** ูุชู ุชุญุฏูุซู ุชููุงุฆูุงู.
*   **ุงููููุงุช ุงูุญุณุงุณุฉ:** ูููุงุช `browser_state.json` ู `known_subs.json` ูุง ูุชู ุฑูุนูุง ููุนุงูุฉ ุฃุจุฏุงู.
*   **Airflow Token:** ูุญููุธ ูุญููุงู ููุท ุนูู ุฌูุงุฒู.

---

## ๐ ุฏููู ุงูุชุดุบูู (Operating Manual)

### ุชุดุบูู Airflow
ูุชุดุบูู ุงููุธุงู ุจุฃูุตู ุฏูุฉ (ูู ุฌูุงุฒู):
```bash
start_airflow
```
ุซู ุชุฃูุฏ ูู ุชูุนูู ุงูุฒุฑ (Unpause) ุจุฌุงูุจ `ftth_monitor_enhanced`.

### ุงููุฑุงูุจุฉ
*   **ุงูุฅุดุนุงุฑุงุช:** ุชุตูู ุนูู ุชูููุฌุฑุงู (ุงูููุงุฉ ุงูุฎุงุตุฉ ุฃู ุงููุทูุฑ ุญุณุจ ููุน ุงูุญุฏุซ).
*   **ุงูุชูุงุฑูุฑ:** ูุตูู ุชูุฑูุฑ "Run Log" ุฅุฐุง ุญุฏุซ ุฎุทุฃ ุฃู ูุชูุฎูุต ุงูุนูููุงุช.

---

## โ ุญู ุงููุดุงูู (Troubleshooting)

### ูุดููุฉ: ุธููุฑ "N/A" ูู ุงูุฅุดุนุงุฑุงุช
*   **ุงูุณุจุจ:** ุงููููุน ูุฏ ูุบูุฑ ุฃุณูุงุก ุงูุญููู (ูุซูุงู `expiryDate` ุชุตุจุญ `endDate`).
*   **ุงูุญู:** ุชู ุฅุถุงูุฉ ูุถุน "ุชุตุญูุญ ุงูุฃุฎุทุงุก" (Debug Mode) ูู ุงูุชุญุฏูุซ ุงูุฃุฎูุฑ. ุณูุชู ุทุจุงุนุฉ ุดูู ุงูุจูุงูุงุช ูู ุงูู Logs ููุนุฑู ุงูุงุณู ุงูุตุญูุญ ููุนุฏูู.

### ูุดููุฉ: ุชููู ุงูุฅุดุนุงุฑุงุช
1.  ุชุฃูุฏ ุฃู `cron-job.org` ููุนู (Enabled).
2.  ุชุฃูุฏ ุฃู ุงูุชููู (Token) ูู `cron-job` ูู ุฎุงูุฉ Headers ูู ููุชูู.
3.  ุงูุญุต ุงูู Actions Tab ูู GitHub ูุฑุคูุฉ ุณุจุจ ุงูุฎุทุฃ (ุบุงูุจุงู ุณุชุฌุฏ ุฑุณุงูุฉ ูุงุถุญุฉ).

---

## ๐ ุณุฌู ุงูุชุบููุฑุงุช ุงูุฃุฎูุฑ
1.  **Dual Scheduler:** ุชูุนูู Airflow + GitHub Cron ูุนุงู.
2.  **Safety Logic:** ุฅุถุงูุฉ Rate Limiter ูููุน ุงูุชุฏุงุฎู.
3.  **Webhook:** ุชุฌููุฒ GitHub ูุงุณุชูุจุงู ุฅุดุงุฑุงุช ุฎุงุฑุฌูุฉ.
4.  **Logging:** ุชุญุณูู ุชูุงุฑูุฑ ุงูุฃุฎุทุงุก ูููุดุชุฑููู.
